name: DNS Resolve Test

on:
  workflow_dispatch:

jobs:
  dns-check:
    runs-on: ubuntu-latest

    steps:
    - name: 输出系统dig版本，确认有dig命令
      run: dig -v

    - name: 使用系统dig查询 A 记录
      run: |
        echo "使用系统dig命令查询 cm.cf.cname.vvhan.com 的A记录:"
        dig +short A cm.cf.cname.vvhan.com

    - name: 设置Python环境
      uses: actions/setup-python@v4
      with:
        python-version: '3.x'

    - name: 安装dnspython库
      run: pip install dnspython

    - name: 运行Python解析脚本
      run: python resolve_dns.py
      # 确保你的resolve_dns.py文件被commit到仓库里，且同目录
